let modal_appeal=document.querySelector(".modal-appeal"),blackBackground=document.querySelector(".background-modal"),modalAppealOpen=document.querySelector(".footer-contacts-button"),modalAppealClose=modal_appeal.querySelector(".modal-appeal .close"),form=modal_appeal.querySelector(".appeal-form"),fullname=modal_appeal.querySelector("[name=fullname]"),email=modal_appeal.querySelector("[name=email]"),text=modal_appeal.querySelector("[name=text]"),inputFields=[fullname,email,text],isStorageSupport=!0,storageFullName="",storageEmail="";try{storageFullName=localStorage.getItem("fullName"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupprot=!1}form.addEventListener("submit",(function(e){if(fullname.value&&email.value&&text.value)isStorageSupport&&(localStorage.setItem("fullName",fullname.value),localStorage.setItem("email",email.value));else{e.preventDefault(),modal_appeal.classList.remove("modal-error"),modal_appeal.offsetWidth=modal_appeal.offsetWidth,modal_appeal.classList.add("modal-error");for(let e=0;e<inputFields.length;e++)inputFields[e].value||inputFields[e].classList.add("error");for(let e=0;e<inputFields.length;e++)inputFields[e].addEventListener("focus",(function(){inputFields[e].classList.remove("error")}))}})),modalAppealOpen&&modalAppealOpen.addEventListener("click",(function(e){e.preventDefault(),modal_appeal.classList.add("modal-show"),blackBackground.classList.add("background-modal-show"),isStorageSupport?(fullname.value=storageFullName,email.value=storageEmail,text.focus()):fullname.focus()}));const modalClose=function(){modal_appeal.classList.add("modal-close-animation"),setTimeout(modalDisplayNone,600)},modalDisplayNone=function(){blackBackground.classList.remove("background-modal-show"),modal_appeal.classList.remove("modal-show"),modal_appeal.classList.remove("modal-error"),modal_appeal.classList.remove("modal-close-animation")};modalAppealClose&&modalAppealClose.addEventListener("click",(function(){modalClose()})),blackBackground.addEventListener("click",(function(){modalClose()})),window.addEventListener("keydown",(function(e){"Escape"===e.key&&modal_appeal.classList.contains("modal-show")&&(e.preventDefault(),modalClose())}));
